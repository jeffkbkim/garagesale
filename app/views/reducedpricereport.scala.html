@(user: User)(sale: Sale)(receiptsssss: List[Receipt])(items: List[Item])(userReceipts: Map[User, List[Receipt]])

@main(title = sale.getName) {
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
@*<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.cyan-light_blue.min.css">*@
<link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/report.css")">
<link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/table.css")">
<link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/style.css")">

@*<div class="mdl-layout mdl-js-layout">*@
    @*<main class="mdl-layout_content">*@
        <div class="demo-card-wide">
            <div class="mdl-card__title">
                <h3 class="mdl-card__title-text">Items that sold for less for Sale "@sale.getName()"</h3>
            </div>
            @for((userReceipt, receipts) <- userReceipts) {
            <h4 class="mdl-card__title-text">User: @userReceipt.getUserName</h4>
            <div class="mdl-card--border">
                <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp receipts-table">
                    <thead>
                    <tr>
                        <th class="mdl-data-table__cell medium">Item Name</th>
                        <th class="mdl-data-table__cell tiny">Quantity</th>
                        <th class="mdl-data-table__cell tiny">Original Price</th>
                        <th class="mdl-data-table__cell tiny">Sell Price</th>
                    </tr>
                    </thead>
                    <tbody>
                    @for(receipt <- userReceipts.get(userReceipt)) {
                        @for(transaction <- receipt.getTransactions) {
                            @if(transaction.getItem().getPrice() > transaction.getProfit()/transaction.getQuantity()) {
                            <tr>
                                <td class="mdl-data-table__cell">
                                    @transaction.getItem().getName()
                                </td>
                                <td class="mdl-data-table__cell">
                                    @transaction.getQuantity()
                                </td>
                                <td class="mdl-data-table__cell">
                                    $@transaction.getItem().getPrice()
                                </td>
                                <td class="mdl-data-table__cell">
                                    $@(transaction.getProfit()/transaction.getQuantity())
                                </td>
                            </tr>

                    }
                    }
                    }
                    </tbody>
                    <tfoot>
                    <tr>
                        <td></td>
                        <td>Total Profit</td>
                        <td class="mdl-data-table__cell total">
                            $@Utils.currToString(Receipt.getTotalProfit(userReceipts.get(userReceipt)))
                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>

            }

        </div>
        @*</main>*@
    @*</div>*@
}


